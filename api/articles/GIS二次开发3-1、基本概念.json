{"title":"3-1、基本概念","uid":"6eff7a900e4643b755c99a32b6c443e2","slug":"GIS二次开发3-1、基本概念","date":"2022-12-08T10:13:58.517Z","updated":"2022-12-08T10:15:33.831Z","comments":true,"path":"api/articles/GIS二次开发3-1、基本概念.json","keywords":null,"cover":null,"content":"<p><a name=\"Ve6Vt\"></a></p>\n<h3 id=\"一、基本概念\"><a href=\"#一、基本概念\" class=\"headerlink\" title=\"一、基本概念\"></a>一、基本概念</h3><p>交互式绘制的两个基本概念</p>\n<ul>\n<li>画布</li>\n<li>画笔</li>\n</ul>\n<p>画布就是一个数据源，加载到矢量图层。<br />画笔就是交互式控件<code>ol.interaction.Draw</code></p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>交互式的绘制本质上就是，交互式的在数据源中添加要素</p></blockquote>\n<p><a name=\"EpUgF\"></a></p>\n<h3 id=\"二、操作步骤\"><a href=\"#二、操作步骤\" class=\"headerlink\" title=\"二、操作步骤\"></a>二、操作步骤</h3><p>1、创建画布–本质上创建一个空的矢量数据源<br />2、激活画笔<br />3、将画笔添加到地图容器</p>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&lt;!DOCTYPE html&gt;\n&lt;html lang&#x3D;&quot;en&quot;&gt;\n\n&lt;head&gt;\n    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;\n    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1.0&quot;&gt;\n    &lt;title&gt;Document&lt;&#x2F;title&gt;\n    &lt;script src&#x3D;&quot;.&#x2F;dist&#x2F;include-openlayers-local.js&quot;&gt;&lt;&#x2F;script&gt;\n    &lt;script src&#x3D;&quot;.&#x2F;lib&#x2F;map.js&quot;&gt;&lt;&#x2F;script&gt;\n&lt;&#x2F;head&gt;\n\n&lt;body&gt;\n    &lt;div id&#x3D;&quot;map&quot;&gt;\n    &lt;&#x2F;div&gt;\n    &lt;script&gt;\n        var map &#x3D; new ol.Map(&#123;\n            target: &quot;map&quot;,\n            layers: [gaode],\n            view: new ol.View(&#123;\n                projection: &#39;EPSG:4326&#39;,\n                center: [114.30, 30.50],\n                zoom: 4\n            &#125;)\n        &#125;)\n        &#x2F;* 1、创建画布--创建了一个空的矢量数据源 *&#x2F;\n        var source &#x3D; new ol.source.Vector(&#123;&#125;);\n        var layer &#x3D; new ol.layer.Vector(&#123;\n            source\n        &#125;)\n        map.addLayer(layer);\n        &#x2F;* 2、创建画笔 *&#x2F;\n        var draw &#x3D; new ol.interaction.Draw(&#123;\n            &#x2F;* 画布在什么地方绘制 *&#x2F;\n            source,\n            type: &quot;Point&quot;\n        &#125;)\n        &#x2F;* 3、将画笔添加到地图容器之上 *&#x2F;\n        map.addInteraction(draw);\n    &lt;&#x2F;script&gt;\n&lt;&#x2F;body&gt;\n\n&lt;&#x2F;html&gt;</code></pre>\n<p><a name=\"y41QO\"></a></p>\n<h3 id=\"三、激活画笔与移除画笔\"><a href=\"#三、激活画笔与移除画笔\" class=\"headerlink\" title=\"三、激活画笔与移除画笔\"></a>三、激活画笔与移除画笔</h3><table>\n<thead>\n<tr>\n<th>map.addInteraction(draw)</th>\n<th>激活画笔</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>map.removeInteraction(draw)</td>\n<td>移除画笔</td>\n</tr>\n<tr>\n<td>draw.on(‘drawend’,evt=&gt;{<br />console.log(evt)<br />})</td>\n<td>监听画笔</td>\n</tr>\n</tbody></table>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p> 关键步骤创建画笔和激活画笔</p></blockquote>\n<pre class=\"line-numbers language-javascript\" data-language=\"javascript\"><code class=\"language-javascript\">&lt;body&gt;\n    &lt;button onclick&#x3D;&quot;active()&quot;&gt;激活画笔&lt;&#x2F;button&gt;\n    &lt;button onclick&#x3D;&quot;remove()&quot;&gt;移除画笔&lt;&#x2F;button&gt;\n    &lt;button onclick&#x3D;&quot;reset()&quot;&gt;清除&lt;&#x2F;button&gt;\n    &lt;div id&#x3D;&quot;map_container&quot;&gt;\n    &lt;&#x2F;div&gt;\n&lt;script&gt;\n    var map &#x3D; new ol.Map(&#123;\n        target:&quot;map_container&quot;,\n        layers:[gaode],\n        view:new ol.View(&#123;\n            projection:&#39;EPSG:4326&#39;,\n            center:[114.30,30.50],\n            zoom:4\n        &#125;)\n    &#125;)\n    &#x2F;* 创建画布 *&#x2F;\n    var source &#x3D; new ol.source.Vector(&#123;\n        wrapX:false\n    &#125;)\n    var layer &#x3D; new ol.layer.Vector(&#123;\n        source\n    &#125;)\n    map.addLayer(layer)\n    &#x2F;* 激活画笔 *&#x2F;\n    let draw;\n    function active()&#123;\n        draw &#x3D; new ol.interaction.Draw(&#123;\n            type:&quot;Point&quot;,\n            source\n        &#125;)\n        map.addInteraction(draw);\n        draw.on(&#39;drawend&#39;, function (e) &#123;\n         console.log(&#39;绘制完成&#39;)\n        &#125;)\n    &#125;\n    &#x2F;&#x2F;移除画笔\n    function remove()&#123;\n        map.removeInteraction(draw);\n    &#125;\n    &#x2F;&#x2F;情况数据\n    function reset()&#123;\n        source.clear();\n    &#125;\n   \n   \n&lt;&#x2F;script&gt;\n&lt;&#x2F;body&gt;</code></pre>","text":" 一、基本概念交互式绘制的两个基本概念 画布 画笔 画布就是一个数据源，加载到矢量图层。画笔就是交互式控件ol.interaction.Draw 交互式的绘制本质上就是，交互式的在数据源中添加要素 二、操作步骤1、创建画布–本质上创建一个空的矢量数据源2、激活画笔3、将画笔添加到...","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"GIS二次开发","slug":"GIS二次开发","count":29,"path":"api/categories/GIS二次开发.json"}],"tags":[{"name":"D3 交互式绘制","slug":"D3-交互式绘制","count":6,"path":"api/tags/D3-交互式绘制.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%80%E3%80%81%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">一、基本概念</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BA%8C%E3%80%81%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">二、操作步骤</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%B8%89%E3%80%81%E6%BF%80%E6%B4%BB%E7%94%BB%E7%AC%94%E4%B8%8E%E7%A7%BB%E9%99%A4%E7%94%BB%E7%AC%94\"><span class=\"toc-text\">三、激活画笔与移除画笔</span></a></li></ol>","author":{"name":"团子","slug":"blog-author","avatar":"https://blog4xk-1309331490.cos.ap-nanjing.myqcloud.com/markdown/QQ%E5%9B%BE%E7%89%8720221205215218.jpg","link":"/","description":"处变不惊   安之若素","socials":{"github":"https://github.com/codbish","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/bguihiub","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"3-2、交互式绘制线","uid":"38551397fad68eeb41b883ca043de6df","slug":"GIS二次开发3-2、交互式绘制线","date":"2022-12-08T10:32:50.800Z","updated":"2022-12-08T10:33:31.300Z","comments":true,"path":"api/articles/GIS二次开发3-2、交互式绘制线.json","keywords":null,"cover":null,"text":"&#x2F;&#x2F; 二. 创建画笔 draw &#x3D; new ol.interaction.Draw(&#123; &#x2F;&#x2F; 在哪个画布上绘制 source: source, &#x2F;&#x2F; 绘制的类型 type: &#39;LineStri...","link":"","photos":[],"count_time":{"symbolsCount":190,"symbolsTime":"1 mins."},"categories":[{"name":"GIS二次开发","slug":"GIS二次开发","count":29,"path":"api/categories/GIS二次开发.json"}],"tags":[{"name":"D3 交互式绘制","slug":"D3-交互式绘制","count":6,"path":"api/tags/D3-交互式绘制.json"}],"author":{"name":"团子","slug":"blog-author","avatar":"https://blog4xk-1309331490.cos.ap-nanjing.myqcloud.com/markdown/QQ%E5%9B%BE%E7%89%8720221205215218.jpg","link":"/","description":"处变不惊   安之若素","socials":{"github":"https://github.com/codbish","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/bguihiub","juejin":"","customs":{}}}},"next_post":{"title":"2-13、常用方法","uid":"7523abae84acf4819d2920e7d389cadc","slug":"GIS二次开发2-13、常用方法_new","date":"2022-12-08T10:13:23.330Z","updated":"2022-12-08T10:13:23.331Z","comments":true,"path":"api/articles/GIS二次开发2-13、常用方法_new.json","keywords":null,"cover":[],"text":" 获取图层 map.getLayers() 获取源 layer.getSource() 获取要素 source.getFeature() 要素下包括 geometry和style ","link":"","photos":[],"count_time":{"symbolsCount":102,"symbolsTime":"1 mins."},"categories":[{"name":"GIS二次开发","slug":"GIS二次开发","count":29,"path":"api/categories/GIS二次开发.json"}],"tags":[{"name":"D2 矢量图形绘制","slug":"D2-矢量图形绘制","count":9,"path":"api/tags/D2-矢量图形绘制.json"}],"author":{"name":"团子","slug":"blog-author","avatar":"https://blog4xk-1309331490.cos.ap-nanjing.myqcloud.com/markdown/QQ%E5%9B%BE%E7%89%8720221205215218.jpg","link":"/","description":"处变不惊   安之若素","socials":{"github":"https://github.com/codbish","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"https://blog.csdn.net/bguihiub","juejin":"","customs":{}}}}}